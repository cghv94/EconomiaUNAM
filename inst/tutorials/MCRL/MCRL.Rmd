---
title: "Modelo cl√°sico de regresi√≥n lineal. Primera parte."
subtitle: "[Facultad de Econom√≠a, UNAM](http://economia.unam.mx)\n"
author: "[C√©sar Gerardo Hern√°ndez Vargas](https://cghv94.github.io/)\n, [Am√©rica Vianney Vel√°squez Abrego](https://github.com/Vianney98)\n" 
date: "09/06/2021\n\n"
output: learnr::tutorial
runtime: shiny_prerendered
---

  ```{r setup, include=FALSE}
library(learnr)
```

## 1.¬øQu√© es el Modelo Cl√°sico de Regresi√≥n Lineal 

<center>
  <img src="https://www.bing.com/images/blob?bcid=Tj5dOudj7OQCcw">
  </center>
 <p style="text-align: justify">Para entender el modelo cl√°sico de regresi√≥n lineal (MCRL) debemos entender los supuestos en los que descansa.  <p style="text-align: justify">**1¬∞ Supuesto:** El modelo sigue una tendencia lineal, es decir, tiene como base los promedios de las variables y sigue esa tendencia. 
 <p style="text-align: justify">**2¬∞ Supuesto:** Los valores de 'X' siguen una secuancia l√≥gica, pues guardan una relaci√≥n directa o inversamente proporcional. 
 <p style="text-align: justify">**3¬∞ Supuesto:** Los residuos se comportan como en una distribuci√≥n normal en donde se tiende a 0. Si los residuos no tienden a 0 se descarta el modelo,p ues deja de comportarse como una distribuci√≥n normal. 
 <p style="text-align: justify">**4¬∞ Supuesto:** El modelo es homocedastico, pues los residuos se comportan de manera similar dentro de los datos, adem√°s, la varianza tiende a 0. En caso contrario, es decir, que el modelo sea heterocedastico (Que la varianza de una variable sea distinta de las dem√°s varianzas, lo que provoca que los residuos tengan diferentes varianzas y los datos tengan mucha variaci√≥n), se descarta. 
 <p style="text-align: justify">**5¬∞ Supuesto:** Los residuos no deben tener auto correlaci√≥n entre ellos. Para estp, la covarianza (relaci√≥n entre las variables) debe ser igual a 0.
 <p style="text-align: justify">**6¬∞ Supuesto:** La covarianza entre el residuo y el eje 'X' debe ser cero. 
 <p style="text-align: justify">**7¬∞ Supuesto:** El n√∫mero de observaciones debe ser mayor que el n√∫mero de par√°metros por estimar. 
 <p style="text-align: justify">**8¬∞ Supuesto:** La varianza 'x' debe ser mayor a 0. <p style="text-align: justify">**9¬∞ Supuesto:** El modelo debe estar bien especificado, es decir, a mayor comportamiento de 'x', los datos se expanden. 
 <p style="text-align: justify">**10¬∞ Supuesto:** No hay multicolinealidad perfecta, es decir, no existen relaciones perfectamente lineales entre las variables explicativas. 
 
## 2. ¬øPara qu√© sirve el MCRL?
 <p style="text-align: justify"> Una de los principales usos del MCRL es el ***forecasting***. 
  <p style="text-align: justify"> El ***forecasting*** es el proceso por el cual se pueden realizar predicciones a futuro con base en un an√°lisis estad√≠stico con datos y tendencias observadas de manera hist√≥rica.
  <p style="text-align: justify"> Para identificar un buen ***forecasting*** este debe tener:
  <p style="text-align: justify">**Tendencias:** Incrementos y/o disminuciones en nuestros datos. 
 <p style="text-align: justify">**Estacionalidad:** Periodos concretos.
 <p style="text-align: justify">**Puntos de inflexi√≥n:** Cambios en los valores de los datos. 

## 3. ¬øC√≥mo implementar el MCRL?

<p style="text-align: justify">Existe una serie de pasos a seguir para poder conseguir implementar nuestro modelo. 
<p style="text-align: justify">**1. Definir nuestra hip√≥tesis**
<p style="text-align: justify">**2. Realizar un an√°lisis exploratorio de datos**
<p style="text-align: justify">**Realizar un an√°lisis bivariado**
<p style="text-align: justify">**Plantear una funci√≥n de regresi√≥n**
<p style="text-align: justify">**Ajustar el modelo de regresi√≥n**
<p style="text-align: justify">Vamos a ejemplificar lo anterior. 
<p style="text-align: center">**HIP√ìTESIS**
<p style="text-align: justify">**¬øEl pib de M√©xico est√° en funci√≥n del PIB de EUA?**
<p style="text-align: justify">Hip√≥tesis nula:
<p style="text-align: justify">*H~0~*= El PIB de M√©xico s√≠ depende el PIB de EUA. 
<p style="text-align: justify">*H~1~*= El PIB de M√©xico no depende el PIB de EUA. 
<p style="text-align: center">**AN√ÅLISIS EXPLORATORIO DE DATOS (AN√ÅLISIS UNIVARIADO)**
<p style="text-align: justify">*Medidas de tendencia central*
<p style="text-align: justify">*Medidas de dispersi√≥n*
<p style="text-align: justify">*Representaci√≥n gr√°fica*
<p style="text-align: justify">En este paso podemos utilizar Rstudio para hacer un an√°lisis exploratorio de datos. 
<p style="text-align: justify">Las paqueter√≠as ***tidyverse***, ***DT*** y ***moments*** nos ayudar√°n a realizar este an√°lisis. 
<p style="text-align: justify">Vamos a descargar las librer√≠as de la siguiente forma: 

```{r}
library(tidyverse)
library(DT)
library(moments)
```
<p style="text-align: justify">El banco de datos del Banco Mundial proporciona datos sobre el
Producto Interno Bruto (PIB) de varios pa√≠ses.
<p style="text-align: justify">La informaci√≥n sobre valores del **PIB en d√≥lares constantes** a
precios de 2010 est√° disponible en:https://databank.worldbank.org/indicator/NY.GDP.MKTP.CD/1ff4a498/Popular-Indicators
<p style="text-align: justify">Para este ejemplo,
podemos descargar los
datos del PIB de M√©xico y
el PIB de EUA de 1980 a
2018 desde la liga:
https://cghv94.github.io/
gdp.csv
<p style="text-align: justify">Para descargar la base de datos se debe hacer lo siguiente: 

```{r}
gdp <- read.csv("https://cghv94.github.io/gdp.csv")
gdp
```
<p style="text-align: justify">Podemos realizar una gr√°fica del PIB de M√©xico utilizando **plot**. 


```{r}
plot(gdp$year, gdp$gdp_mx, type = "o", col = "green")
```


<p style="text-align: justify">Al igual que la gr√°fica del PIB estadounidense: 
```{r}
plot(gdp$year, gdp$gdp_us, type = "o", col = "blue")
```
<p style="text-align: justify">***Medidas de tendencia central*** 
<p style="text-align: justify">**Moda:** El elemento que se repite m√°s veces en la muestra.
<p style="text-align: justify">**Mediana:** Si ordenamos los elementos de la muestra del menor al mayor, la mediana es el
elemento que se encuentra a la mitad de los datos ordenados.
<p style="text-align: justify">**Media:** La suma de todos los elementos de la muestra entre el n√∫mero total de
observaciones. Puede obtenerse mediante la f√≥rmula:
  <center>
<img src="https://4.bp.blogspot.com/-5JZG3Q-mmWQ/TbJgVRC5_VI/AAAAAAAAAAc/g2jOEvorGjE/s1600/safsasfa.jpg">
  </center>


<p style="text-align: justify">***Frecuencias absolutas, frecuencias relativas y probabilidad cl√°sica***
<p style="text-align: justify">Muestra: 1, 1, 2, 2, 2, 2, 2, 2, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5.


| Elemento|Frecuencias absolutas = *f~j~*|Frecuencias relativas = *(f~j~)/n*| Probabilidad cl√°sica|
|:-:|:-:|:-:|:-:|
|1.|2|2/20|10%|
|2.|6|6/20|30%|
|3.|3|3/20|15%|
|4.|5|5/20|25%|
|5.|4|4/20|20%|
|**Sumatoria**|20|**20/20**|100%|
|Cada uno de los elementos que aparecen en la muestra.|Cuenta del n√∫mero de veces que aparece el elemento ùëñ en la muestra.|La frecuencia absoluta del elemento ùëñ dividida entre el n√∫mero total de observaciones.|El cociente de la frecuencia absoluta del elemento ùëñ dividida entre el n√∫mero total de observaciones.|

<p style="text-align: justify">***Medidas de dispersi√≥n***
<center>
  <img src="https://www.bing.com/images/blob?bcid=TnO6hbErMuUC3Q" width="750"/>
  </center>

<p style="text-align: justify">Con los datos anteriores podemos realizar el **an√°lisis operatorio del PIB de M√©xico**

```{r}
resumen_mx <- rbind(M√≠nimo=min(gdp$gdp_mx), M√°ximo=max(gdp$gdp_mx), Mediana=median(gdp$gdp_mx), Media=mean(gdp$gdp_mx), Desviaci√≥n=sd(gdp$gdp_mx), Varianza=var(gdp$gdp_mx), Asimetr√≠a=skewness(gdp$gdp_mx), Curtosis=kurtosis(gdp$gdp_mx))
colnames(resumen_mx) <- "Valor"
datatable(resumen_mx)
```
<p style="text-align: justify">Con los datos anteriores podemos realizar el **an√°lisis operatorio del PIB de Estados Unidos**

```{r}
resumen_us <- rbind(M√≠nimo=min(gdp$gdp_us), M√°ximo=max(gdp$gdp_us), Mediana=median(gdp$gdp_us), Media=mean(gdp$gdp_us), Desviaci√≥n=sd(gdp$gdp_us), Varianza=var(gdp$gdp_us), Asimetr√≠a=skewness(gdp$gdp_us), Curtosis=kurtosis(gdp$gdp_us))
colnames(resumen_us) <- "Valor"
datatable(resumen_us)
```
<p style="text-align: center">**DISTRIBUCI√ìN NORMAL Y EMP√çRICA**
<p style="text-align: justify">Decimos que una serie de datos se distribuyen de manera normal cuando el valor del coeficiente de asimetr√≠a es igual a 0 y el valor del coeficiente de curtosis es igual a 3. 
  <center>
  <img src="https://i.pinimg.com/474x/ef/5b/ee/ef5bee5da4bd9437ae3f51913dc6388f--normal-distribution-gre-math.jpg">
  </center>
<p style="text-align: justify">Cuando una serie de observaciones
cumple con estas caracter√≠sticas, podemos afirmar que el 68.2% de los datos se agrupan a no m√°s de una desviaci√≥n est√°ndar respecto al valor medio, el 95.4% de los datos a no mas de 2 deviaciones est√°ndar y el 99.7% de los datos a no mas de 3 deviaciones est√°ndar.   <center>
  <img src="https://tradingcenter.files.wordpress.com/2009/11/distrib-normal3.jpg">
  </center>

<p style="text-align: center">**REPRESENTACIONES GR√ÅFICAS DE LA DISTRIBUCI√ìN**
<p style="text-align: justify">***Histograma (pol√≠gono de frecuencias)***
 <center>
  <img src="https://i.stack.imgur.com/89yVK.png" width="650"/>
  </center>
<p style="text-align: justify">***Diagrama de caja (boxplot)***
 <center>
  <img src="http://dataanalyticsedge.com/wp-content/uploads/2018/05/5.jpg">
  </center>
<p style="text-align: justify">***Ojiva (frcuencias relativas acumuladas)***
 <center>
  <img src="http://4.bp.blogspot.com/_DEstOaB5TDY/SMdtoWgJuqI/AAAAAAAAAFY/g3fvnIAQdpw/s400/3.png">
  </center>
<p style="text-align: justify">***Gr√°fica de dispersi√≥n***
 <center>
  <img src="https://www.bing.com/images/blob?bcid=TnJNs5enROYC2Q">
  </center>

<p style="text-align: justify">Si realizamos el histograma del PIB de M√©xico se debe hacer de la siguiente forma: 
```{r}
hist(gdp$gdp_mx, col = "green")
```
<p style="text-align: justify">Y si queremos realizar el histograma del PIB de Estados Unidos se debe hacer de la siguiente forma: 
```{r}
hist(gdp$gdp_us, col = "blue")
```

<p style="text-align: center">**AN√ÅLISIS BIVARIADO**
<p style="text-align: justify">*a. Correlaci√≥n y asociaci√≥n lineal*
<p style="text-align: justify">*b. MCRL mediante m√≠nimos cuadrados ordinarios*
<p style="text-align: justify">Seguimos con nuestro ejemplo. Realizamos un gr√°fico de dispersi√≥n entre el PIB de EUA y el PIB de M√©xico: 
```{r}
plot(gdp$gdp_us, gdp$gdp_mx, col = "purple")
```
<p style="text-align: justify">Es necesario conocer los siguientes conceptos:
 <center>
  <img src="https://www.bing.com/images/blob?bcid=The-3wGig-UCIQ" width="750">
  </center>
<p style="text-align: justify">**¬øC√≥mo sabemos si hay asociaci√≥n lineal?**
<p style="text-align: justify">Para continuar con el c√≥digo, vamos a buscar la asociaci√≥n lineal de la siguiente forma: 
```{r}
asociacion_lineal <- rbind(Covarianza=cov(gdp$gdp_us, gdp$gdp_mx), Correlaci√≥n=cor(gdp$gdp_us, gdp$gdp_mx), Determinaci√≥n=(cor(gdp$gdp_us, gdp$gdp_mx))^2)
colnames(asociacion_lineal) <- "Valor"
datatable(asociacion_lineal)
```
<p style="text-align: justify">Podemos observar que el coeficiente de correlaci√≥n es cercano a uno, as√≠ que existe evidencia estad√≠stica de una fuerte asociaci√≥n lineal positiva entre el PIB de EAU y el PIB de M√©xico. 

<p style="text-align: center">**MODELO CL√ÅSICO DE REGRESI√ìN LINEAL**
<p style="text-align: justify">*I. Planteamos la ecuaci√≥n de la recta*
<center>
  <img src="https://www.bing.com/images/blob?bcid=TqvWlAC3LuUC7g">
  </center>

<p style="text-align: justify">*II. Replanteamos la ecuaci√≥n como una funci√≥n de regresi√≥n lineal*
<center>
  <img src="https://www.bing.com/images/blob?bcid=TqQRU671JeUC9A">
  </center>
  
<p style="text-align: justify">*III. Sustituimos nuestras variables en la funci√≥n de regresi√≥n lineal*
<center>
  <img src="https://www.bing.com/images/blob?bcid=TgUFGklzWuUC7A">
  </center>
  
<p style="text-align: justify">*IV. Esta ser√≠a la versi√≥n final de nuestra regresi√≥n*
<center>
  <img src="https://www.bing.com/images/blob?bcid=TsNSQgGaQeUCJg" width="700">
  </center>
  
<p style="text-align: center">**MODELO LINEAL SIMPLE**
<p style="text-align: justify">Vamos a realizar nuestro modelo de regresi√≥n simple en R. 
<center>
  <img src="https://www.bing.com/images/blob?bcid=Tj-3dlZEtOUChQ">
  </center>
```{r}
lm(gdp_mx ~ gdp_us, data = gdp)
```
<p style="text-align: justify">**Gr√°fica de dispersi√≥n con regresi√≥n lineal**
```{r}
plot(gdp$gdp_us, gdp$gdp_mx, col = "purple")
abline(lm(gdp_mx ~ gdp_us, data = gdp), col = "red")
```
<p style="text-align: center">**RESUMEN ESTAD√çSTICO DEL MODELO LINEAL SIMPLE**
<p style="text-align: justify">Para obtener el resumen estad√≠stico del modelo escribimos lo siguiente en nuestro c√≥digo: 
```{r}
modelo <- lm(gdp_mx ~ gdp_us, data = gdp)
summary(modelo)
```

<p style="text-align: justify">*Gr√°fica de dispersi√≥n con regresi√≥n lineal y suavizamiento de patrones*
<p style="text-align: justify">Por √∫ltimo, realizamos la gr√°fica de dispersi√≥n con la regresi√≥n lineal: 
```{r}
ggplot(gdp, aes(gdp_us, gdp_mx)) + 
  geom_point() + 
  geom_smooth(method = "lm")
```
## 5. Ejercicios
<p style="text-align: justify">**Ejercicio 1**

```{r ejercicio1, exercise=TRUE}
# Texto1 para ejercicio

```

```{r ejercicio1-solution}
# Texto 1 para ejercicio y soluci√≥n

```
<p style="text-align: justify">**Ejercicio 2**

```{r ejercicio2, exercise=TRUE}
# Texto2 para ejercicio

```

```{r ejercicio2-solution}
# Texto 2 para ejercicio y soluci√≥n

```
<p style="text-align: justify">**Ejercicio 3**

```{r ejercicio3, exercise=TRUE}
# Texto3 para ejercicio

```

```{r ejercicio3-solution}
# Texto 3 para ejercicio y soluci√≥n

```
<p style="text-align: justify">**Ejercicio 4**

```{r ejercicio4, exercise=TRUE}
# Texto4 para ejercicio

```

```{r ejercicio4-solution}
# Texto 4 para ejercicio y soluci√≥n

```
<p style="text-align: justify">**Ejercicio 5**

```{r ejercicio5, exercise=TRUE}
# Texto5 para ejercicio

```

```{r ejercicio5-solution}
# Texto 5 para ejercicio y soluci√≥n

```

## 6. Preguntas
**¬øQu√© he aprendido?**
 
  <p style="text-align: justify">Ya hemos aprendido sobre las medidas de forma, ahora responde el cuestionario que se presenta a continuaci√≥n...</p>
 
```{r pregunta1, echo=FALSE}
question("Pregunta 1 :D", answer("a1", correct = TRUE), answer("b1"), answer("c1"), random_answer_order = TRUE)
```
```{r pregunta2, echo=FALSE}
question("Pregunta 2 :D", answer("a2", correct = TRUE), answer("b2"), answer("c2"), random_answer_order = TRUE)
```
```{r pregunta3, echo=FALSE}
question("Pregunta 3 :D", answer("a3"), answer("b3"), answer("c3",correct = TRUE), random_answer_order = TRUE)
```
```{r pregunta4, echo=FALSE}
question("Pregunta 4 :D", answer("a4", correct = TRUE), answer("b4"), answer("c4"), random_answer_order = TRUE)
```
```{r pregunta5, echo=FALSE}
question("Pregunta 5 :D", answer("a5"), answer("b5", correct = TRUE), answer("c5"), random_answer_order = TRUE)
```

## 7. Reflexiones finales
 **¬øQu√© aprendimos en esta lecci√≥n?**
```{r checkbox, echo=FALSE}
question_checkbox("Aqu√≠ va la pregunta",
  answer("Esta es la respuesta correcta", correct = TRUE, message = "Muchas felicidades, si entendiste el tema üòÅ"),
  answer("Esta es la respuesta incorrecta 1'", message = "Debes repasar el tema"),
  answer("Esta es la respuesta incorrecta 2", message = "Debes repasar el tema"),
  answer("Esta es la respuesta incorrecta 3", message = "Debes repasar el tema"),
  random_answer_order = TRUE,
  allow_retry = TRUE,
  try_again = "Try again"
)
```
<p style="text-align: justify">¬°Felicidades, ahora sabes un poco m√°s sobre las medidas de forma!</p>
 
<p style="text-align: justify">**Referencias.**
<p style="text-align: justify">‚Ä¢ Moreno, P., Rodr√≠guez Poo, J. M., Sober√≥n, A.   (s.f.). *Tema 2: El Modelo de Regresi√≥n Lineal Simple*. Universidad de Cantabria. https://ocw.unican.es/pluginfile.php/1127/course/section/1352/Ppt_Ch2_G942_14-15.pdf
<p style="text-align: justify">‚Ä¢ El arte de la econometr√≠a. (2013). *Supuestos de la regresi√≥n cl√°sica lineal*. http://aprendiendoeconometria.blogspot.com/2013/06/supuestos-del-modelo-clasico-de.html
